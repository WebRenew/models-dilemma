Hey! Found a bug with AI SDK + AI Gateway when using `deepseek/deepseek-v3.2-thinking`.

Error: Cannot read properties of undefined (reading 'inputTokens')

Repro:

import { gateway } from '@ai-sdk/gateway';
import { generateText } from 'ai';

const result = await generateText({
  model: gateway('deepseek/deepseek-v3.2-thinking'),
  prompt: 'Any prompt longer than a few words',
  temperature: 0,
});

What happens: Simple prompts work, but longer prompts fail. Looks like the SDK expects token usage in a specific format that DeepSeek's thinking model doesn't return.

Happy to open a GitHub issue if that's preferred!


